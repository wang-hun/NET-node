# .NET入门: 使用linq，替代for循环

## ***Part *0**** 为什么要使用linq 🍌

我们来看一个简单的需求:

```C#
var numbers = new List<List<int>>{
   new List<int>{1,2,3,4},
   new List<int>{5,6,7,8,9},
   new List<int>{10,11,12}
};
```

这是一组数字，现在我需要你将里面的所有偶数挑出来，这当然很好实现。    
如果你只会使用for循环：

```C#
for (int i = 0; i < numbers.Count; i++) {
    for (int j = 0; j < numbers[i].Count; j++) {
        if (numbers[i][j] % 2 == 0) {
            Console.WriteLine(numbers[i][j]);
        }
    }
}
```

这很简单，任何学过编程的同学都会。  
如果你会foreach，那可以更简单:

```C#
foreach (var number in numbers) {
    foreach (var item in number) { 
    if (item%2==0) Console.WriteLine(item); 
    }
}
```
接下来我将告诉你更简便的方法，那就是用linq。

```C#

foreach (var number in numbers.SelectMany(x => x).Where(x => x % 2 == 0)) {
    Console.WriteLine(number);
}
```

这里引用一段GPT对LInq的解释:
> C# 中的 LINQ（Language Integrated Query）是一种编程技术，  
> 它允许开发者使用类似 SQL 的查询语法来操作集合、数组、数据库等数据源。  
> LINQ 提供了一种统一的方式来查询和转换数据，使得代码更加简洁和易于理解。

使用linq可以直接对数据进行查询、处理。而不需要再使用for循环遍历的方式，不仅可以精简代码，  
也可减少人为实现查询方法，因为疏忽而导致的错误。

## ***Part *1**** linq的简单使用 🖥


linq主要的使用方式分为两种，一种是语句式，一种是函数调用式。  
上述例子🌰当中使用的就是函数调用式。我们先来看看比较像sql语句的语句式。  
这里我们从数据库练习题里随便拿点数据过来。
  
这里让🤖gpt随便生成了一些数据和数据定义
```C#
var students = new List<Student>
{
    new Student(1, "Alice", 20, "Sophomore"),
    new Student(2, "Bob", 21, "Junior"),
    new Student(3, "Charlie", 22, "Senior")
};
var teachers = new List<Teacher>
{
    new Teacher(1, "Mr. Smith", "Mathematics", "Science"),
    new Teacher(2, "Ms. Johnson", "History", "Arts"),
    new Teacher(3, "Dr. Lee", "Physics", "Science")
};
public class Student
{
    public int Id { get; set; }
    public string Name { get; set; }
    public int Age { get; set; }
    public string Grade { get; set; }

    public Student(int id, string name, int age, string grade)
    {
        Id = id;
        Name = name;
        Age = age;
        Grade = grade;
    }
}
public class Teacher
{
    public int Id { get; set; }
    public string Name { get; set; }
    public string Subject { get; set; }
    public string Department { get; set; }

    public Teacher(int id, string name, string subject, string department)
    {
        Id = id;
        Name = name;
        Subject = subject;
        Department = department;
    }
}
```